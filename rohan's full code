#include <Adafruit_MotorShield.h>
#include "nodefunctions.h"

int counter = 0; //helps the robot know where it is

void setup() {
  Serial.begin(9600);
  Serial.println("Setup");
  if (!AFMS.begin()) {         // create with the default frequency 1.6KHz
  // if (!AFMS.begin(1000)) {  // OR with a different frequency, say 1KHz
    Serial.println("Could not find Motor Shield. Check wiring.");
    while (1);
  }
  pinMode(buttonPin, INPUT); 
  pinMode(sl,INPUT);
  pinMode(sr,INPUT);
  LeftMotor->setSpeed(motorspeed);
  RightMotor->setSpeed(motorspeed);
  // int val = digitalRead(buttonPin); // read input value
  // if (val == HIGH){
    delay(10000);
      first_block();
  }


//1ST BLOCK
void first_block(){
  setSourceAndEnd(0,3);
  dijkstra();
  pathnode();
  reset();

  if (Soft == true){
    setSourceAndEnd(3,5);
    dijkstra();
    pathnode();
    reset();    
  }

  else if (Soft == false){
    setSourceAndEnd(3,7);
    dijkstra();
    pathnode();
    reset();
    counter++;   
  }
  second_block();
}


//3RD BLOCK
void third_block(){
  if (counter == 0){
    setSourceAndEnd(5,12);
    dijkstra();
    pathnode();
    reset();
  }

  else if (counter == 1){
    setSourceAndEnd(7,12);
    dijkstra();
    pathnode();
    reset();
  }
}

//2ND BLOCK
void second_block(){
  if (counter == 0){
    setSourceAndEnd(5,11);
    dijkstra();
    pathnode();
    reset();

    if (Soft == true){
      setSourceAndEnd(11,5);
      dijkstra();
      pathnode();
      reset();
    }

    else if (Soft == false){
      setSourceAndEnd(11,7);
      dijkstra();
      pathnode();
      reset();
      counter++;
    }
  }

  else if (counter == 1){
    counter--;
    setSourceAndEnd(7,11);
    dijkstra();
    pathnode();
    reset();

    if (Soft == true){
      setSourceAndEnd(11,5);
      dijkstra();
      pathnode();
      reset();
    }

    else if (Soft == false){
      setSourceAndEnd(11,7);
      dijkstra();
      pathnode();
      reset();
      counter++;
  }
  third_block();
}
}
